
% ---

\begin{frame}{Globbing (expansion des noms de fichiers)}
  \begin{itemize}
    \item Le \texttt{globbing} est un mécanisme du shell qui permet de faire 
          correspondre des \texttt{motifs} (\emph{patterns}) en utilisant des 
          caractères spéciaux appelés \texttt{jokers} (\emph{wildcards})
  
    \item L'expansion est faite par le shell \textbf{avant} que la commande ne soit exécutée
  
    \item Exemple :
    \begin{terminal}
      \prompt\ \shcmd{ls} *.txt
    \end{terminal}
    \begin{itemize}
      \pause
      \item Le shell cherche tous les fichiers qui correspondent à \texttt{*.txt}
      \pause
      \item Il remplace ensuite \texttt{*.txt} par la liste des fichiers trouvés
      \pause
      \item La commande \texttt{ls} ne voit que la liste finale des fichiers
    \end{itemize}
  \end{itemize}
\end{frame}

% ---

\begin{frame}{L'astérisque : \texttt{*}}
  \begin{itemize}
    \item L'astérisque \texttt{*} correspond à \textbf{n'importe quelle chaîne de caractères}, 
          y compris une chaîne vide (zéro ou plusieurs caractères)

    \item Imaginons les fichiers suivants dans un dossier : \\
    \begin{terminal}
    \only<1,3,5>{
    rapport.txt rapport\_final.pdf image.jpg doc.txt
    }

    \only<2>{
    rapport.\textbf{\color{red} txt} rapport\_final.pdf image.jpg doc.\textbf{\color{red} txt}
    }

    \only<4>{
    \textbf{\color{red} rap}port.txt \textbf{\color{red} rap}port\_final.pdf image.jpg doc.txt
    }

    \only<6>{
    \textbf{\color{red}rapport.txt rapport\_final.pdf image.jpg doc.txt}
    }
    \end{terminal}

    \begin{terminal}
    \onslide<1->{
    \prompt\ \shcmd{ls} *.txt
    }

    \onslide<2->{
    rapport.txt doc.txt
    }
    \end{terminal}

    \begin{terminal}
    \onslide<1->{
    \prompt\ \shcmd{ls} rap*
    }

    \onslide<4->{
    rapport.txt rapport\_final.pdf
    }
    \end{terminal}

    \begin{terminal}
    \onslide<1->{
    \prompt\ \shcmd{ls} *
    }

    \onslide<6->{
    rapport.txt rapport\_final.pdf image.jpg doc.txt
    }
    \end{terminal}
  \end{itemize}
\end{frame}

% ---

\begin{frame}{Le point d'interrogation: \texttt{?}}
  \begin{itemize}
    \item Le point d'interrogation \texttt{?} correspond à \textbf{exactement un}
          caractère, quel qu'il soit.
  
    \item Imaginons les fichiers : \\
          \texttt{photo1.jpg photo2.jpg photoA.jpg photo10.jpg}
    
    \begin{itemize}
      \item \texttt{ls photo?.jpg} \\
            \textit{Résultat :} \texttt{photo1.jpg photo2.jpg photoA.jpg}
      \item \textbf{Pourquoi pas \texttt{photo10.jpg} ?} \\
            Car \texttt{?} ne remplace qu'un seul caractère, alors que "10" en contient deux.
      \item \texttt{ls photo??.jpg} \\
            \textit{Résultat :} \texttt{photo10.jpg}
    \end{itemize}
  \end{itemize}
\end{frame}

% ---

\begin{frame}{Les crochets : \texttt{[...]}}
  \begin{itemize}
    \item Les crochets \texttt{[...]} correspondent à \textbf{un seul caractère} parmi 
          ceux spécifiés dans l'ensemble. On peut y mettre une liste ou un intervalle.
  
    \item Imaginons les fichiers : \\
          \texttt{rapport1.pdf rapport2.pdf rapport3.pdf rapportA.pdf}
    
    \begin{itemize}
      \item \textbf{Avec une liste :} \texttt{ls rapport[13A].pdf} \\
            \textit{Résultat :} \texttt{rapport1.pdf rapport3.pdf rapportA.pdf}
      \item \textbf{Avec un intervalle :} \texttt{ls rapport[1-3].pdf} \\
            \textit{Résultat :} \texttt{rapport1.pdf rapport2.pdf rapport3.pdf}
      \item \textbf{Intervalle alphabétique :} \texttt{ls fichier[a-c].log} \\
            \textit{Correspondra à :} \texttt{fichiera.log}, \texttt{fichierb.log}, \texttt{fichierc.log}
    \end{itemize}
  \end{itemize}
\end{frame}

% ---

\begin{frame}{La puissance des combinaisons}
  \begin{exampleblock}{Exemples concrets}
    \begin{itemize}
      \item Lister toutes les images (\texttt{.jpg}, \texttt{.png}, \texttt{.gif}) qui commencent par "vacances" et ont un numéro à deux chiffres :
      \begin{terminal}
        \prompt\ \shcmd{ls} vacances[0-9][0-9].*
      \end{terminal}
      \textit{Correspondra à \texttt{vacances01.jpg}, \texttt{vacances25.png}, mais pas \texttt{vacances1.jpg}}.
      
      \item Supprimer tous les fichiers de log (\texttt{.log}) sauf celui du jour 5 :
      \begin{terminal}
        \prompt\ \shcmd{rm} 2023-10-[0-4]*.log 2023-10-[6-9]*.log
      \end{terminal}
      
      \item Lister les chapitres 1 à 9 de n'importe quel type de fichier :
      \begin{terminal}
        \prompt\ \shcmd{ls} chap?.*
      \end{terminal}
      \textit{Ou plus précisément :}
      \begin{terminal}
        \prompt\ \shcmd{ls} chap[1-9].*
      \end{terminal}
    \end{itemize}
  \end{exampleblock}
\end{frame}

% ---
\begin{frame}{Aller plus loin : Négation et Classes de Caractères}
  \begin{block}{La Négation : \texttt{[!...]} ou \texttt{[\^{}...]}}
    Le point d'exclamation (ou l'accent circonflexe) en premier dans les crochets signifie "tout sauf".
    
    \begin{itemize}
      \item \texttt{ls photo[!0-9].jpg} \\
      \textit{Liste les fichiers \texttt{photoX.jpg} où X n'est pas un chiffre.}
    \end{itemize}
  \end{block}
  
  \pause
  
  \begin{block}{Les Classes de Caractères POSIX}
    Pour plus de portabilité, on peut utiliser des classes prédéfinies.
    \begin{itemize}
        \item \texttt{[[:alpha:]]} : Toutes les lettres (a-z, A-Z)
        \item \texttt{[[:digit:]]} : Tous les chiffres (0-9)
        \item \texttt{[[:alnum:]]} : Tous les alphanumériques
        \item \texttt{[[:lower:]]} : Toutes les lettres minuscules
    \end{itemize}
    \textbf{Exemple :} \texttt{ls rapport[[:digit:]].pdf} est équivalent à \texttt{ls rapport[0-9].pdf}.
  \end{block}
\end{frame}

% ---

% --- Diapositive 7 : Globbing vs Regex ---
\begin{frame}{Globbing vs. Expressions Régulières (Regex)}
  
  C'est une confusion très fréquente !
  
  \begin{columns}[T]
    \begin{column}{.5\textwidth}
      \begin{block}{Globbing}
        \begin{itemize}
          \item \textbf{But :} Expansion des noms de fichiers.
          \item \textbf{Où :} Dans le shell (\texttt{ls}, \texttt{cp}, \texttt{mv}...).
          \item \textbf{Syntaxe :} Simple (\texttt{*}, \texttt{?}, \texttt{[]}).
          \item \texttt{*} = Zéro ou plusieurs caractères.
        \end{itemize}
     \end{block}
    \end{column}
    \begin{column}{.5\textwidth}
      \begin{block}{Expressions Régulières (Regex)}
        \begin{itemize}
          \item \textbf{But :} Recherche de motifs dans du texte.
          \item \textbf{Où :} Dans des commandes comme \texttt{grep}, \texttt{sed}, \texttt{awk}, et en programmation.
          \item \textbf{Syntaxe :} Plus riche et complexe (\texttt{.}, \texttt{+}, \texttt{*}, \texttt{\^{}}, \texttt{\$}, \texttt{()}).
          \item \texttt{*} = Zéro ou plusieurs occurrences du caractère \textit{précédent}.
        \end{itemize}
      \end{block}
    \end{column}
  \end{columns}
\end{frame}

% ---

% --- Diapositive 8 : Résumé ---
\begin{frame}{Résumé}
  \begin{itemize}
    \item Le \textbf{globbing} est une fonctionnalité du shell pour manipuler des groupes de fichiers.
    \item Les jokers principaux sont :
    \begin{itemize}
      \item \texttt{*} : Zéro ou plusieurs caractères quelconques.
      \item \texttt{?} : Exactement un caractère quelconque.
      \item \texttt{[...]} : Exactement un caractère parmi un ensemble ou un intervalle.
      \item \texttt{[!...]} : Exactement un caractère qui n'est pas dans l'ensemble.
    \end{itemize}
    \item La combinaison de ces jokers vous permet de cibler des fichiers de manière très précise et efficace.
    \item C'est un outil fondamental pour travailler en ligne de commande.
  \end{itemize}
\end{frame}

% ---

